<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<header th:fragment="header">
<!--导航栏-->
<nav class="navbar navbar-expand-md fixed-top navbar-dark bg-secondary">
    <!--标题-->
    <a class="navbar-brand mb-0 h1" th:href="@{/}">微课网</a>

    <!--折叠按钮,用data-target指定需要折叠的内容-->
    <button class="navbar-toggler p-0 border-0" type="button" data-toggle="collapse" data-target="#target-div" >
        <span class="navbar-toggler-icon"></span>
    </button>

    <!--div包裹需要折叠的内容，用id标识，-->
    <div class="navbar-collapse offcanvas-collapse " id="target-div">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" th:href="@{/course/showCourse}">课程<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">资源</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">手记</a>
            </li>

            <!--下拉条-->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">设置</a>
                <!--下拉框中的内容-->
                <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" href="#">背景设置</a>
                    <a class="dropdown-item" href="#">字体设置</a>
                    <a class="dropdown-item" href="#">声音设置</a>
                </div>
            </li>
        </ul>

        <form class="form-inline mr-auto my-lg-0" id="search-form" method="get" th:action="@{/course/search}">
            <input type="search" class="form-control " placeholder="搜点什么?" name="q" id="q"/>
            <button type="submit" class="btn btn-outline-success my-2 my-sm-0" id="search">搜索</button>
        </form>

        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" th:href="@{/login.html}" th:if="${session.user==null}">登录</a></li>
            <li class="nav-item"><a class="nav-link" th:href="@{/register.html}" th:if="${session.user==null}">注册</a></li>

            <li class="nav-item dropdown " th:unless="${session.user==null}">
                <img class="rounded-circle img-fluid nav-link dropdown-toggle" style="width: 45px;height: 45px" th:src="${session.user.avatar}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="head-avatar"/>
                <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" th:href="@{/home/wo}">个人中心</a>
                    <a class="dropdown-item" th:href="@{/pay/car}">我的购物车</a>
                    <a class="dropdown-item" th:href="@{/home/showOrder}">订单中心</a>
                    <a class="dropdown-item" th:href="@{/home/data}">个人设置</a>
                    <a class="dropdown-item" th:href="@{/user/logout}">退出</a>
                </div>
            </li>
            <li class="nav-item active"><a class="nav-link" href="#" th:unless="${session.user==null}">                  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</a></li>
        </ul>
    </div>
</nav>
    <!--
    <script type="text/javascript">
        document.getElementById('search').click=function(){
            var q=document.getElementById('key').text().trim();
            if(q==null || q=="")
                return false;
            var url='/wk/course/search?q='+q;
            document.getElementById("search-form").setAttribute('action',url);
        }

    </script>
    -->
</header>
</body>
</html>